<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>08 Electrical Data</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f6ff;
  margin: 0;
}

.header {
  background: #003f88;
  color: white;
  padding: 30px 15px;
  text-align: center;
}
.header h1 { margin: 0; font-size: 36px; }
.header p {
  margin-top: 8px;
  font-size: 18px;
  opacity: 0.95;
}
.header .credit {
  margin-top: 6px;
  font-size: 16px;
  font-weight: 500;
  opacity: 0.95;
}

.container {
  max-width: 1200px;
  margin: 30px auto;
  padding: 0 15px;
  display: grid;
  grid-template-columns: 280px 1fr 280px;
  gap: 20px;
}

.card {
  background: white;
  border-radius: 10px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  padding: 25px;
}

.card h2 {
  margin-top: 0;
  color: #003f88;
  text-align: center;
}

.master-btns,
.jobs-btns {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.master-btns a { text-decoration: none; }

.master-btns button,
.jobs-btns button {
  width: 100%;
  padding: 12px;
  font-size: 15px;
  background: #003f88;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.master-btns button:hover,
.jobs-btns button:hover { opacity: 0.9; }

.select-row {
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

select {
  padding: 12px;
  font-size: 16px;
  border-radius: 6px;
  border: 1px solid #ccc;
  min-width: 260px;
}

.button-row {
  margin-top: 20px;
  display: flex;
  gap: 15px;
  justify-content: center;
  flex-wrap: wrap;
}

.button-row button {
  padding: 12px 28px;
  font-size: 16px;
  background: #003f88;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
.button-row button:hover { opacity: 0.9; }

.footer {
  text-align: center;
  padding: 15px;
  font-size: 14px;
  color: #555;
}

@media (max-width: 1000px) {
  .container { grid-template-columns: 1fr; }
}
@media (max-width: 600px) {
  select, .button-row button { width: 100%; }
}
</style>
</head>

<body>

<div class="header">
  <h1>08 Electrical Data</h1>
  <p>Drive Information & Maintenance History</p>
  <div class="credit">Designed and Maintained by RAKESH CHANDRA SETHY</div>
</div>

<div class="container">

  <div class="card">
    <h2>Master List</h2>
    <div class="master-btns">
      <a href="https://08electricaldata.github.io/drive-viewer/motorlist.html">
        <button>‚öôÔ∏è Motor List</button>
      </a>
      <a href="https://08electricaldata.github.io/drive-viewer/trafolist.html">
        <button>‚ö° Transformer List</button>
      </a>
      <a href="https://08electricaldata.github.io/drive-viewer/breakerlist.html">
        <button>üîå Breaker List</button>
      </a>
    </div>
  </div>

  <div class="card">
    <h2>Select Drive</h2>
    <div class="select-row">
      <select id="mainDrive">
        <option value="">Select Main Drive</option>
      </select>
      <select id="subDrive">
        <option value="">Select Sub Drive</option>
      </select>
    </div>

    <div class="button-row">
      <button onclick="openPage('view')">VIEW</button>
      <button onclick="openPage('history')">HISTORY</button>
    </div>
  </div>

  <div class="card">
    <h2>Jobs</h2>
    <div class="jobs-btns">
      <button onclick="openJob('date')">üìÖ Datewise Jobs</button>
      <button onclick="openJob('advanced')">üìä Advanced Summary</button>
      <button onclick="openMotorOH()">üõ†Ô∏è Motor O/H Data</button>
    </div>
  </div>

</div>

<div class="footer">
  ¬© 08 Electrical Data | Designed & Maintained by Rakesh Chandra Sethy (08 Electrical)
</div>

<script>
// üî• JSON SOURCE (FAST)
const JSON_URL =
  "https://raw.githubusercontent.com/08electricaldata/08electricaldata-json/main/dropdown/drives.json";

let headers = [];
let rows = [];
let sheetPassword = "OK"; // password handled separately if needed

// ---------- LOAD JSON ----------
async function loadSheet() {
  const cache = localStorage.getItem("driveJSON");

  if (cache) {
    const d = JSON.parse(cache);
    headers = d.headers;
    rows = d.rows;
    buildMain();
    return;
  }

  const r = await fetch(JSON_URL);
  const d = await r.json();

  headers = d.headers;
  rows = d.rows;

  localStorage.setItem("driveJSON", JSON.stringify(d));
  buildMain();
}

// ---------- MAIN DRIVE (START FROM COLUMN H) ----------
function buildMain() {
  const main = document.getElementById("mainDrive");
  main.innerHTML = "<option value=''>Select Main Drive</option>";

  headers.forEach((h, i) => {
    if (i < 7) return;   // ‚õî skip A‚ÄìG
    if (!h) return;

    const o = document.createElement("option");
    o.value = i;        // keep real column index
    o.textContent = h;
    main.appendChild(o);
  });
}


// ---------- SUB DRIVE ----------
document.getElementById("mainDrive").onchange = function () {
  const idx = this.value;
  const sub = document.getElementById("subDrive");
  sub.innerHTML = "<option value=''>Select Sub Drive</option>";
  if (idx === "") return;

  rows.forEach(r => {
    const val = r[idx];
    if (val) {
      const o = document.createElement("option");
      o.value = val;
      o.textContent = val;
      sub.appendChild(o);
    }
  });
};

// ---------- PASSWORD CHECK ----------
function checkPassword() {
  return true; // ready for password JSON if needed
}

// ---------- VIEW / HISTORY ----------
function openPage(type) {
  const mainSel = document.getElementById("mainDrive");
  const subSel = document.getElementById("subDrive");

  if (!mainSel.value || !subSel.value) {
    alert("Please select Main Drive and Sub Drive");
    return;
  }

  if (!checkPassword()) return;

  const id = mainSel.selectedOptions[0].text + "-" + subSel.value;
  const base =
    type === "view"
      ? "drive-viewer/index.html?id="
      : "drive-viewer/history.html?id=";

  window.location.href =
    "https://08electricaldata.github.io/" +
    base +
    encodeURIComponent(id);
}

// ---------- JOBS ----------
function openJob(type) {
  const url =
    type === "advanced"
      ? "https://08electricaldata.github.io/drive-viewer/summary-advanced.html"
      : "https://08electricaldata.github.io/drive-viewer/summary-date.html";

  window.location.href = url;
}

// ---------- MOTOR O/H ----------
function openMotorOH() {
  window.location.href =
    "https://08electricaldata.github.io/drive-viewer/motoroh.html";
}

loadSheet();
</script>

</body>
</html>
